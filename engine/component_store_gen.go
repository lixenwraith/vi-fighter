// Code generated by gen-manifest; DO NOT EDIT.

package engine

import (
	"github.com/lixenwraith/vi-fighter/component"
	"github.com/lixenwraith/vi-fighter/core"
)

// Component ID Bitmasks Mapping for Engine-Level Entity Signatures
// Used for O(1) destruction skipping and future fast queries
const (
	GlyphBit uint64 = 1 << iota
	SigilBit
	NuggetBit
	CursorBit
	ProtectionBit
	KineticBit
	WallBit
	LootBit
	GatewayBit
	EnergyBit
	HeatBit
	ShieldBit
	BoostBit
	WeaponBit
	OrbBit
	PingBit
	DecayBit
	BlossomBit
	CleanerBit
	DustBit
	NavigationBit
	CombatBit
	GenotypeBit
	LightningBit
	MissileBit
	PulseBit
	SpiritBit
	MaterializeBit
	TargetBit
	TargetAnchorBit
	DrainBit
	QuasarBit
	SwarmBit
	StormBit
	StormCircleBit
	BulletBit
	PylonBit
	SnakeBit
	SnakeHeadBit
	SnakeBodyBit
	SnakeMemberBit
	EyeBit
	TowerBit
	HeaderBit
	MemberBit
	FlashBit
	FadeoutBit
	SplashBit
	MarkerBit
	DeathBit
	TimerBit
	PositionBit // Special index designated for spatial grid presence
)

// Component provides typed component store pointers
// Embedded in World, initialized once at world creation
type Component struct {
	Glyph        *Store[component.GlyphComponent]
	Sigil        *Store[component.SigilComponent]
	Nugget       *Store[component.NuggetComponent]
	Cursor       *Store[component.CursorComponent]
	Protection   *Store[component.ProtectionComponent]
	Kinetic      *Store[component.KineticComponent]
	Wall         *Store[component.WallComponent]
	Loot         *Store[component.LootComponent]
	Gateway      *Store[component.GatewayComponent]
	Energy       *Store[component.EnergyComponent]
	Heat         *Store[component.HeatComponent]
	Shield       *Store[component.ShieldComponent]
	Boost        *Store[component.BoostComponent]
	Weapon       *Store[component.WeaponComponent]
	Orb          *Store[component.OrbComponent]
	Ping         *Store[component.PingComponent]
	Decay        *Store[component.DecayComponent]
	Blossom      *Store[component.BlossomComponent]
	Cleaner      *Store[component.CleanerComponent]
	Dust         *Store[component.DustComponent]
	Navigation   *Store[component.NavigationComponent]
	Combat       *Store[component.CombatComponent]
	Genotype     *Store[component.GenotypeComponent]
	Lightning    *Store[component.LightningComponent]
	Missile      *Store[component.MissileComponent]
	Pulse        *Store[component.PulseComponent]
	Spirit       *Store[component.SpiritComponent]
	Materialize  *Store[component.MaterializeComponent]
	Target       *Store[component.TargetComponent]
	TargetAnchor *Store[component.TargetAnchorComponent]
	Drain        *Store[component.DrainComponent]
	Quasar       *Store[component.QuasarComponent]
	Swarm        *Store[component.SwarmComponent]
	Storm        *Store[component.StormComponent]
	StormCircle  *Store[component.StormCircleComponent]
	Bullet       *Store[component.BulletComponent]
	Pylon        *Store[component.PylonComponent]
	Snake        *Store[component.SnakeComponent]
	SnakeHead    *Store[component.SnakeHeadComponent]
	SnakeBody    *Store[component.SnakeBodyComponent]
	SnakeMember  *Store[component.SnakeMemberComponent]
	Eye          *Store[component.EyeComponent]
	Tower        *Store[component.TowerComponent]
	Header       *Store[component.HeaderComponent]
	Member       *Store[component.MemberComponent]
	Flash        *Store[component.FlashComponent]
	Fadeout      *Store[component.FadeoutComponent]
	Splash       *Store[component.SplashComponent]
	Marker       *Store[component.MarkerComponent]
	Death        *Store[component.DeathComponent]
	Timer        *Store[component.TimerComponent]
}

// initComponents creates all component stores
// Called once from NewWorld()
func initComponents(w *World) {
	w.Components.Glyph = NewStore[component.GlyphComponent](w, GlyphBit)
	w.Components.Sigil = NewStore[component.SigilComponent](w, SigilBit)
	w.Components.Nugget = NewStore[component.NuggetComponent](w, NuggetBit)
	w.Components.Cursor = NewStore[component.CursorComponent](w, CursorBit)
	w.Components.Protection = NewStore[component.ProtectionComponent](w, ProtectionBit)
	w.Components.Kinetic = NewStore[component.KineticComponent](w, KineticBit)
	w.Components.Wall = NewStore[component.WallComponent](w, WallBit)
	w.Components.Loot = NewStore[component.LootComponent](w, LootBit)
	w.Components.Gateway = NewStore[component.GatewayComponent](w, GatewayBit)
	w.Components.Energy = NewStore[component.EnergyComponent](w, EnergyBit)
	w.Components.Heat = NewStore[component.HeatComponent](w, HeatBit)
	w.Components.Shield = NewStore[component.ShieldComponent](w, ShieldBit)
	w.Components.Boost = NewStore[component.BoostComponent](w, BoostBit)
	w.Components.Weapon = NewStore[component.WeaponComponent](w, WeaponBit)
	w.Components.Orb = NewStore[component.OrbComponent](w, OrbBit)
	w.Components.Ping = NewStore[component.PingComponent](w, PingBit)
	w.Components.Decay = NewStore[component.DecayComponent](w, DecayBit)
	w.Components.Blossom = NewStore[component.BlossomComponent](w, BlossomBit)
	w.Components.Cleaner = NewStore[component.CleanerComponent](w, CleanerBit)
	w.Components.Dust = NewStore[component.DustComponent](w, DustBit)
	w.Components.Navigation = NewStore[component.NavigationComponent](w, NavigationBit)
	w.Components.Combat = NewStore[component.CombatComponent](w, CombatBit)
	w.Components.Genotype = NewStore[component.GenotypeComponent](w, GenotypeBit)
	w.Components.Lightning = NewStore[component.LightningComponent](w, LightningBit)
	w.Components.Missile = NewStore[component.MissileComponent](w, MissileBit)
	w.Components.Pulse = NewStore[component.PulseComponent](w, PulseBit)
	w.Components.Spirit = NewStore[component.SpiritComponent](w, SpiritBit)
	w.Components.Materialize = NewStore[component.MaterializeComponent](w, MaterializeBit)
	w.Components.Target = NewStore[component.TargetComponent](w, TargetBit)
	w.Components.TargetAnchor = NewStore[component.TargetAnchorComponent](w, TargetAnchorBit)
	w.Components.Drain = NewStore[component.DrainComponent](w, DrainBit)
	w.Components.Quasar = NewStore[component.QuasarComponent](w, QuasarBit)
	w.Components.Swarm = NewStore[component.SwarmComponent](w, SwarmBit)
	w.Components.Storm = NewStore[component.StormComponent](w, StormBit)
	w.Components.StormCircle = NewStore[component.StormCircleComponent](w, StormCircleBit)
	w.Components.Bullet = NewStore[component.BulletComponent](w, BulletBit)
	w.Components.Pylon = NewStore[component.PylonComponent](w, PylonBit)
	w.Components.Snake = NewStore[component.SnakeComponent](w, SnakeBit)
	w.Components.SnakeHead = NewStore[component.SnakeHeadComponent](w, SnakeHeadBit)
	w.Components.SnakeBody = NewStore[component.SnakeBodyComponent](w, SnakeBodyBit)
	w.Components.SnakeMember = NewStore[component.SnakeMemberComponent](w, SnakeMemberBit)
	w.Components.Eye = NewStore[component.EyeComponent](w, EyeBit)
	w.Components.Tower = NewStore[component.TowerComponent](w, TowerBit)
	w.Components.Header = NewStore[component.HeaderComponent](w, HeaderBit)
	w.Components.Member = NewStore[component.MemberComponent](w, MemberBit)
	w.Components.Flash = NewStore[component.FlashComponent](w, FlashBit)
	w.Components.Fadeout = NewStore[component.FadeoutComponent](w, FadeoutBit)
	w.Components.Splash = NewStore[component.SplashComponent](w, SplashBit)
	w.Components.Marker = NewStore[component.MarkerComponent](w, MarkerBit)
	w.Components.Death = NewStore[component.DeathComponent](w, DeathBit)
	w.Components.Timer = NewStore[component.TimerComponent](w, TimerBit)
	w.Positions = NewPosition(w, PositionBit)
}

// removeEntity removes entity from every component store
// Caller MUST hold updateMutex
func (w *World) removeEntity(e core.Entity) {
	// Guard against unallocated bounds (safety check)
	if int(e) >= len(w.signatures) {
		return
	}

	mask := w.signatures[e]

	// O(1) Fast-Path: If the entity has no components, exit immediately
	if mask == 0 {
		return
	}

	// O(1) Skip: Only invoke Unsafe removal on stores where the bit is strictly present
	if mask&GlyphBit != 0 {
		w.Components.Glyph.RemoveEntityUnsafe(e)
	}
	if mask&SigilBit != 0 {
		w.Components.Sigil.RemoveEntityUnsafe(e)
	}
	if mask&NuggetBit != 0 {
		w.Components.Nugget.RemoveEntityUnsafe(e)
	}
	if mask&CursorBit != 0 {
		w.Components.Cursor.RemoveEntityUnsafe(e)
	}
	if mask&ProtectionBit != 0 {
		w.Components.Protection.RemoveEntityUnsafe(e)
	}
	if mask&KineticBit != 0 {
		w.Components.Kinetic.RemoveEntityUnsafe(e)
	}
	if mask&WallBit != 0 {
		w.Components.Wall.RemoveEntityUnsafe(e)
	}
	if mask&LootBit != 0 {
		w.Components.Loot.RemoveEntityUnsafe(e)
	}
	if mask&GatewayBit != 0 {
		w.Components.Gateway.RemoveEntityUnsafe(e)
	}
	if mask&EnergyBit != 0 {
		w.Components.Energy.RemoveEntityUnsafe(e)
	}
	if mask&HeatBit != 0 {
		w.Components.Heat.RemoveEntityUnsafe(e)
	}
	if mask&ShieldBit != 0 {
		w.Components.Shield.RemoveEntityUnsafe(e)
	}
	if mask&BoostBit != 0 {
		w.Components.Boost.RemoveEntityUnsafe(e)
	}
	if mask&WeaponBit != 0 {
		w.Components.Weapon.RemoveEntityUnsafe(e)
	}
	if mask&OrbBit != 0 {
		w.Components.Orb.RemoveEntityUnsafe(e)
	}
	if mask&PingBit != 0 {
		w.Components.Ping.RemoveEntityUnsafe(e)
	}
	if mask&DecayBit != 0 {
		w.Components.Decay.RemoveEntityUnsafe(e)
	}
	if mask&BlossomBit != 0 {
		w.Components.Blossom.RemoveEntityUnsafe(e)
	}
	if mask&CleanerBit != 0 {
		w.Components.Cleaner.RemoveEntityUnsafe(e)
	}
	if mask&DustBit != 0 {
		w.Components.Dust.RemoveEntityUnsafe(e)
	}
	if mask&NavigationBit != 0 {
		w.Components.Navigation.RemoveEntityUnsafe(e)
	}
	if mask&CombatBit != 0 {
		w.Components.Combat.RemoveEntityUnsafe(e)
	}
	if mask&GenotypeBit != 0 {
		w.Components.Genotype.RemoveEntityUnsafe(e)
	}
	if mask&LightningBit != 0 {
		w.Components.Lightning.RemoveEntityUnsafe(e)
	}
	if mask&MissileBit != 0 {
		w.Components.Missile.RemoveEntityUnsafe(e)
	}
	if mask&PulseBit != 0 {
		w.Components.Pulse.RemoveEntityUnsafe(e)
	}
	if mask&SpiritBit != 0 {
		w.Components.Spirit.RemoveEntityUnsafe(e)
	}
	if mask&MaterializeBit != 0 {
		w.Components.Materialize.RemoveEntityUnsafe(e)
	}
	if mask&TargetBit != 0 {
		w.Components.Target.RemoveEntityUnsafe(e)
	}
	if mask&TargetAnchorBit != 0 {
		w.Components.TargetAnchor.RemoveEntityUnsafe(e)
	}
	if mask&DrainBit != 0 {
		w.Components.Drain.RemoveEntityUnsafe(e)
	}
	if mask&QuasarBit != 0 {
		w.Components.Quasar.RemoveEntityUnsafe(e)
	}
	if mask&SwarmBit != 0 {
		w.Components.Swarm.RemoveEntityUnsafe(e)
	}
	if mask&StormBit != 0 {
		w.Components.Storm.RemoveEntityUnsafe(e)
	}
	if mask&StormCircleBit != 0 {
		w.Components.StormCircle.RemoveEntityUnsafe(e)
	}
	if mask&BulletBit != 0 {
		w.Components.Bullet.RemoveEntityUnsafe(e)
	}
	if mask&PylonBit != 0 {
		w.Components.Pylon.RemoveEntityUnsafe(e)
	}
	if mask&SnakeBit != 0 {
		w.Components.Snake.RemoveEntityUnsafe(e)
	}
	if mask&SnakeHeadBit != 0 {
		w.Components.SnakeHead.RemoveEntityUnsafe(e)
	}
	if mask&SnakeBodyBit != 0 {
		w.Components.SnakeBody.RemoveEntityUnsafe(e)
	}
	if mask&SnakeMemberBit != 0 {
		w.Components.SnakeMember.RemoveEntityUnsafe(e)
	}
	if mask&EyeBit != 0 {
		w.Components.Eye.RemoveEntityUnsafe(e)
	}
	if mask&TowerBit != 0 {
		w.Components.Tower.RemoveEntityUnsafe(e)
	}
	if mask&HeaderBit != 0 {
		w.Components.Header.RemoveEntityUnsafe(e)
	}
	if mask&MemberBit != 0 {
		w.Components.Member.RemoveEntityUnsafe(e)
	}
	if mask&FlashBit != 0 {
		w.Components.Flash.RemoveEntityUnsafe(e)
	}
	if mask&FadeoutBit != 0 {
		w.Components.Fadeout.RemoveEntityUnsafe(e)
	}
	if mask&SplashBit != 0 {
		w.Components.Splash.RemoveEntityUnsafe(e)
	}
	if mask&MarkerBit != 0 {
		w.Components.Marker.RemoveEntityUnsafe(e)
	}
	if mask&DeathBit != 0 {
		w.Components.Death.RemoveEntityUnsafe(e)
	}
	if mask&TimerBit != 0 {
		w.Components.Timer.RemoveEntityUnsafe(e)
	}
	if mask&PositionBit != 0 {
		w.Positions.RemoveEntityUnsafe(e)
	}

	// Ensure signature is entirely wiped
	w.signatures[e] = 0
}

// removeEntitiesBatch removes entities from all stores using batch operations
// Caller MUST hold updateMutex
func (w *World) removeEntitiesBatch(entities []core.Entity) {
	// For batches, we rely on the internal fast-path (len == 0) of the stores
	// and the bitmask updates strictly scoped inside the stores.
	w.Components.Glyph.RemoveBatchUnsafe(entities)
	w.Components.Sigil.RemoveBatchUnsafe(entities)
	w.Components.Nugget.RemoveBatchUnsafe(entities)
	w.Components.Cursor.RemoveBatchUnsafe(entities)
	w.Components.Protection.RemoveBatchUnsafe(entities)
	w.Components.Kinetic.RemoveBatchUnsafe(entities)
	w.Components.Wall.RemoveBatchUnsafe(entities)
	w.Components.Loot.RemoveBatchUnsafe(entities)
	w.Components.Gateway.RemoveBatchUnsafe(entities)
	w.Components.Energy.RemoveBatchUnsafe(entities)
	w.Components.Heat.RemoveBatchUnsafe(entities)
	w.Components.Shield.RemoveBatchUnsafe(entities)
	w.Components.Boost.RemoveBatchUnsafe(entities)
	w.Components.Weapon.RemoveBatchUnsafe(entities)
	w.Components.Orb.RemoveBatchUnsafe(entities)
	w.Components.Ping.RemoveBatchUnsafe(entities)
	w.Components.Decay.RemoveBatchUnsafe(entities)
	w.Components.Blossom.RemoveBatchUnsafe(entities)
	w.Components.Cleaner.RemoveBatchUnsafe(entities)
	w.Components.Dust.RemoveBatchUnsafe(entities)
	w.Components.Navigation.RemoveBatchUnsafe(entities)
	w.Components.Combat.RemoveBatchUnsafe(entities)
	w.Components.Genotype.RemoveBatchUnsafe(entities)
	w.Components.Lightning.RemoveBatchUnsafe(entities)
	w.Components.Missile.RemoveBatchUnsafe(entities)
	w.Components.Pulse.RemoveBatchUnsafe(entities)
	w.Components.Spirit.RemoveBatchUnsafe(entities)
	w.Components.Materialize.RemoveBatchUnsafe(entities)
	w.Components.Target.RemoveBatchUnsafe(entities)
	w.Components.TargetAnchor.RemoveBatchUnsafe(entities)
	w.Components.Drain.RemoveBatchUnsafe(entities)
	w.Components.Quasar.RemoveBatchUnsafe(entities)
	w.Components.Swarm.RemoveBatchUnsafe(entities)
	w.Components.Storm.RemoveBatchUnsafe(entities)
	w.Components.StormCircle.RemoveBatchUnsafe(entities)
	w.Components.Bullet.RemoveBatchUnsafe(entities)
	w.Components.Pylon.RemoveBatchUnsafe(entities)
	w.Components.Snake.RemoveBatchUnsafe(entities)
	w.Components.SnakeHead.RemoveBatchUnsafe(entities)
	w.Components.SnakeBody.RemoveBatchUnsafe(entities)
	w.Components.SnakeMember.RemoveBatchUnsafe(entities)
	w.Components.Eye.RemoveBatchUnsafe(entities)
	w.Components.Tower.RemoveBatchUnsafe(entities)
	w.Components.Header.RemoveBatchUnsafe(entities)
	w.Components.Member.RemoveBatchUnsafe(entities)
	w.Components.Flash.RemoveBatchUnsafe(entities)
	w.Components.Fadeout.RemoveBatchUnsafe(entities)
	w.Components.Splash.RemoveBatchUnsafe(entities)
	w.Components.Marker.RemoveBatchUnsafe(entities)
	w.Components.Death.RemoveBatchUnsafe(entities)
	w.Components.Timer.RemoveBatchUnsafe(entities)
	w.Positions.RemoveBatchUnsafe(entities)
}

// wipeAll clears all component stores
// Caller MUST hold updateMutex
func (w *World) wipeAll() {
	w.Components.Glyph.ClearAllComponentsUnsafe()
	w.Components.Sigil.ClearAllComponentsUnsafe()
	w.Components.Nugget.ClearAllComponentsUnsafe()
	w.Components.Cursor.ClearAllComponentsUnsafe()
	w.Components.Protection.ClearAllComponentsUnsafe()
	w.Components.Kinetic.ClearAllComponentsUnsafe()
	w.Components.Wall.ClearAllComponentsUnsafe()
	w.Components.Loot.ClearAllComponentsUnsafe()
	w.Components.Gateway.ClearAllComponentsUnsafe()
	w.Components.Energy.ClearAllComponentsUnsafe()
	w.Components.Heat.ClearAllComponentsUnsafe()
	w.Components.Shield.ClearAllComponentsUnsafe()
	w.Components.Boost.ClearAllComponentsUnsafe()
	w.Components.Weapon.ClearAllComponentsUnsafe()
	w.Components.Orb.ClearAllComponentsUnsafe()
	w.Components.Ping.ClearAllComponentsUnsafe()
	w.Components.Decay.ClearAllComponentsUnsafe()
	w.Components.Blossom.ClearAllComponentsUnsafe()
	w.Components.Cleaner.ClearAllComponentsUnsafe()
	w.Components.Dust.ClearAllComponentsUnsafe()
	w.Components.Navigation.ClearAllComponentsUnsafe()
	w.Components.Combat.ClearAllComponentsUnsafe()
	w.Components.Genotype.ClearAllComponentsUnsafe()
	w.Components.Lightning.ClearAllComponentsUnsafe()
	w.Components.Missile.ClearAllComponentsUnsafe()
	w.Components.Pulse.ClearAllComponentsUnsafe()
	w.Components.Spirit.ClearAllComponentsUnsafe()
	w.Components.Materialize.ClearAllComponentsUnsafe()
	w.Components.Target.ClearAllComponentsUnsafe()
	w.Components.TargetAnchor.ClearAllComponentsUnsafe()
	w.Components.Drain.ClearAllComponentsUnsafe()
	w.Components.Quasar.ClearAllComponentsUnsafe()
	w.Components.Swarm.ClearAllComponentsUnsafe()
	w.Components.Storm.ClearAllComponentsUnsafe()
	w.Components.StormCircle.ClearAllComponentsUnsafe()
	w.Components.Bullet.ClearAllComponentsUnsafe()
	w.Components.Pylon.ClearAllComponentsUnsafe()
	w.Components.Snake.ClearAllComponentsUnsafe()
	w.Components.SnakeHead.ClearAllComponentsUnsafe()
	w.Components.SnakeBody.ClearAllComponentsUnsafe()
	w.Components.SnakeMember.ClearAllComponentsUnsafe()
	w.Components.Eye.ClearAllComponentsUnsafe()
	w.Components.Tower.ClearAllComponentsUnsafe()
	w.Components.Header.ClearAllComponentsUnsafe()
	w.Components.Member.ClearAllComponentsUnsafe()
	w.Components.Flash.ClearAllComponentsUnsafe()
	w.Components.Fadeout.ClearAllComponentsUnsafe()
	w.Components.Splash.ClearAllComponentsUnsafe()
	w.Components.Marker.ClearAllComponentsUnsafe()
	w.Components.Death.ClearAllComponentsUnsafe()
	w.Components.Timer.ClearAllComponentsUnsafe()
	w.Positions.ClearAllComponentsUnsafe()
}
